!function($){"use strict";$.fn.multipleFilterMasonry=function(options){var cache=[],filters=[];"list"===options.selectorType&&$(options.filtersGroupSelector).children().each((function(){filters.push($(this).data("filter"))}));var init=function($container){$container.find(options.itemSelector).each((function(){cache.push($(this))})),$container.masonry(options)},filterItems=function(selector){var result=[];return $(cache).each((function(item){$(selector).each((function(index,sel){cache[item].is(sel)&&-1===$.inArray(cache[item],result)&&result.push(cache[item])}))})),result},reload=function($container,items){$container.empty(),$(items).each((function(){$($container).append($(this))})),$container.masonry("reloadItems"),$container.masonry()},hashFilter=function($container){var hash=window.location.hash.replace("#","");-1!==$.inArray(hash,filters)&&reload($container,$("."+hash))},proc=function($container){$(options.filtersGroupSelector).find("input[type=radio]").each((function(){$(this).change((function(){var selector=[];$(options.filtersGroupSelector).find("input[type=radio]").each((function(){$(this).is(":checked")&&selector.push("."+$(this).val())}));var items=cache;selector.length>0&&(items=filterItems(selector)),reload($container,items)}))}))},procUL=function($container){$(options.filtersGroupSelector).children().each((function(){$(this).on("click",(function(){$(options.filtersGroupSelector).children().removeClass("selected"),window.location.hash=$(this).data("filter");var selector=[];selector.push("."+$(this).data("filter")),$(this).addClass("selected");var items=cache;selector.length>0&&(items=filterItems(selector)),reload($container,items)}))})),hashFilter($container),$(options.filtersGroupSelector).children().removeClass("selected"),$(".filters li[data-filter="+window.location.hash.replace("#","")+"]").addClass("selected")};return this.each((function(){var $$=$(this);init($$),"list"===options.selectorType?procUL($$):proc($$)}))}}(window.jQuery);